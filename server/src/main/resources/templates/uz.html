<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Tarmoqchi - HTTP tunneling tool for exposing local services to the internet" />
    <meta name="keywords" content="Tarmoqchi, HTTP tunneling, CLI tool, local server" />
    <title>Tarmoqchi - HTTP Tunneling Tool</title>
    <style>
        :root {
            --primary-color: black;
            --hover-color: #525456;
            --secondary-hover: #6c757d;
            --border-color: #e1e4e8;
            --background-light: #f8f9fa;
            --font-primary: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
            Helvetica, Arial, sans-serif;
            --border-radius: 4px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.2s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            line-height: 1.6;
            color: var(--primary-color);
            background-color: white;
        }

        .all {
            max-width: 700px;
            min-height: 100vh;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        .banner-img {
            width: 100%;
            height: auto;
            margin-bottom: 2rem;
            border-radius: var(--border-radius);
        }

        /* Navbar */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary-color);
            text-decoration: none;
        }

        .login-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            transition: var(--transition);
        }

        .login-button:hover {
            background: var(--hover-color);
        }

        /* Profile */
        .profile {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .profile-avatar {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            object-fit: cover;
        }

        .profile-info {
            display: flex;
            flex-direction: column;
        }

        .profile-name {
            font-size: 0.875rem;
            font-weight: 500;
        }

        .profile-email {
            font-size: 0.75rem;
            color: #666;
        }

        .logout-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.375rem 0.75rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.875rem;
            text-decoration: none;
            transition: var(--transition);
        }

        .logout-button:hover {
            background: var(--secondary-hover);
        }

        /* Main content */
        main {
            margin-bottom: 3rem;
        }

        section {
            margin-bottom: 2.5rem;
        }

        h1 {
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        p {
            margin-bottom: 1.5rem;
            font-size: 1.125rem;
        }

        /* Token section */
        .token-container {
            background: var(--background-light);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1.25rem;
            margin-top: 1.25rem;
            margin-bottom: 2rem;
        }

        .token-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .token-title {
            font-size: 1rem;
            font-weight: 500;
        }

        .copy-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }

        .copy-button:hover {
            background: var(--secondary-hover);
        }

        .token-value {
            background: white;
            border: 1px solid var(--border-color);
            padding: 0.75rem;
            border-radius: var(--border-radius);
            font-family: monospace;
            word-break: break-all;
            margin-bottom: 1rem;
            user-select: all;
            overflow-x: auto;
        }

        .token-description {
            font-size: 0.875rem;
            color: #666;
        }

        /* Features */
        .features-list {
            list-style: none;
        }

        .feature-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .feature-item:last-child {
            border-bottom: none;
        }

        .feature-icon {
            color: var(--primary-color);
            font-size: 1.25rem;
            min-width: 1.5rem;
            text-align: center;
        }

        .feature-content h3 {
            font-size: 1.125rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .feature-content p {
            font-size: 0.875rem;
            color: #666;
            margin-bottom: 0;
        }

        /* Code blocks */
        code {
            font-family: monospace;
            background-color: var(--background-light);
            padding: 0.2rem 0.4rem;
            border-radius: var(--border-radius);
            font-size: 0.875rem;
        }

        pre {
            background-color: var(--background-light);
            padding: 1rem;
            border-radius: var(--border-radius);
            overflow-x: auto;
            margin-bottom: 1.5rem;
        }

        pre code {
            background-color: transparent;
            padding: 0;
            font-size: 0.875rem;
            display: block;
        }

        /* GitHub section */
        .github-section {
            text-align: center;
            padding: 2rem 0;
            margin-top: 2rem;
            border-top: 1px solid var(--border-color);
        }

        .github-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        .github-link:hover {
            background: var(--hover-color);
            transform: translateY(-2px);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem 0 1rem;
            border-top: 1px solid var(--border-color);
            color: #666;
            font-size: 0.875rem;
        }

        details {
            margin-bottom: 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
        }

        summary {
            padding: 0.75rem;
            cursor: pointer;
            font-weight: 500;
        }

        details > div {
            padding: 0 0.75rem 0.75rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .all {
                padding: 1.5rem 1rem;
            }

            nav {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .profile {
                width: 100%;
                flex-wrap: wrap;
            }

            h1 {
                font-size: 1.75rem;
            }

            h2 {
                font-size: 1.25rem;
            }

            p {
                font-size: 1rem;
            }

            .token-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }
        }

        @media (max-width: 480px) {
            .all {
                padding: 1rem 0.75rem;
            }

            h1 {
                font-size: 1.5rem;
            }

            .feature-item {
                flex-direction: column;
                gap: 0.5rem;
            }

            .feature-icon {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
<div class="all">
    <nav>
        <a href="/" class="logo" aria-label="Tarmoqchi Home">Tarmoqchi</a>

        <div th:if="${user == null}">
            <a href="/front/github" class="login-button" aria-label="Get Token">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>
                Token olish
            </a>
        </div>

        <div th:if="${user != null}" class="profile">
            <img th:src="${user.avatarUrl}" alt="User Avatar" class="profile-avatar" loading="lazy" />
            <div class="profile-info">
                <span class="profile-name" th:text="${user.name}">Foydalanuvchi ismi</span>
                <span class="profile-email" th:text="${user.email}">ism@misol.com</span>
            </div>
            <a href="/front/logout" class="logout-button" aria-label="Logout">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                Chiqish
            </a>
        </div>
    </nav>

    <main>
        <img src="https://pub-4e4118614197441ca01a142347434959.r2.dev/Screenshot%202025-05-03%20at%2001.19.16.png" alt="Tarmoqchi Banner" class="banner-img" loading="lazy" />

        <section>
            <h1>Tarmoqchi - HTTP tunel yaratuvchi vosita</h1>
            <p>
                Tarmoqchi mahalliy serveringizni internetga osongina chiqarish imkonini beruvchi kuchli CLI vositasidir.
                Tarmoqchi bilan istalgan joydan mahalliy serverlaringizga kirishingiz mumkin, murakkab konfiguratsiyalar yoki boshlang'ich sozlashlarsiz.
            </p>
        </section>

        <!-- Token Section (only shown when logged in) -->
        <section th:if="${user != null && user.token != null}">
            <h2>Sizning autentifikatsita tokeningiz</h2>
            <div class="token-container">
                <div class="token-header">
                    <h3 class="token-title">Bu tokenni Tarmoqchi CLI bilan ishlating</h3>
                    <button class="copy-button" onclick="copyToken()" aria-label="Copy token">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg>
                        Nusxalash
                    </button>
                </div>
                <div class="token-value" id="authTokenValue" th:text="${user.token}" tabindex="0">
                    SIZNING_AUTENTIFIKATSIYA_TOKENINGIZ
                </div>
                <p class="token-description">
                    Bu token GitHub hisobingiz bilan bog'langan undan Tarmoqchi CLI autentifikatsiyasi uchun foydalaning.
                </p>
            </div>
        </section>

        <section>
            <h2>O'rnatish va yangilash</h2>

            <details>
                <summary>macOS/Linux ga o'rnatish</summary>
                <div>
                    <pre><code>curl -fsSL https://github.com/jamshid-elmurodov/tarmoqchi/releases/download/Tarmoqchi-2.0.0/install.sh | sudo bash</code></pre>
                </div>
            </details>

            <details>
                <summary>Windowsga o'rnatish</summary>
                <div>
                    <p>Oxirgi chiqgan dasturni shu yerdan o'rnating.</p>
                </div>
            </details>

            <h3>Qo'llanma</h3>
            <p>Birinchi navbatda saytdan shaxsiy autentifikatsiya tokeningizni oling</p>
            <pre><code>tarmoqchi --auth &lt;AUTENTIFIKATSIYA_TOKENI&gt;</code></pre>

            <p>Mahalliy serveringizni internetga chiqaring:</p>
            <pre><code>tarmoqchi --port &lt;SIZNING_PORTINGIZ&gt;</code></pre>

            <p>Shuningdek, siz maxsus subdomenni ham belgilashingiz mumkin:</p>
            <pre><code>tarmoqchi --port &lt;SIZNING_PORTINGIZ&gt; --sd &lt;SIZNING_SUBDOMENINGIZ&gt;</code></pre>

            <p><strong>Tunelni CTRL + C tugmalarini bir vaqtda bosish orqali to'xtatishingiz mumkin</strong></p>
        </section>

        <section class="github-section">
            <a href="https://github.com/jamshid-elmurodov/tarmoqchi" target="_blank" rel="noopener noreferrer" class="github-link" aria-label="View Tarmoqchi on GitHub">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>
                Githubdan ko'rish
            </a>
        </section>
    </main>

    <footer>
        <p>&copy; <span id="currentYear">2025</span> Tarmoqchi. Barcha huquqlar himoyalangan.</p>
        <p><a href="https://floss.uz" target="_blank" rel="noopener noreferrer">floss.uz</a> tomonidan qo'llab-quvvatlanadi.</p>
    </footer>
</div>

<script>
    // Update copyright year automatically
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    function copyToken() {
        const tokenElement = document.getElementById("authTokenValue");
        const token = tokenElement.textContent.trim();
        const copyBtn = document.querySelector(".copy-button");
        const originalText = copyBtn.innerHTML;

        if (navigator.clipboard) {
            navigator.clipboard
                .writeText(token)
                .then(() => {
                    copyBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M20 6 9 17l-5-5"></path></svg> Copied';
                    copyBtn.style.backgroundColor = "#28a745";

                    setTimeout(() => {
                        copyBtn.innerHTML = originalText;
                        copyBtn.style.backgroundColor = "";
                    }, 2000);
                })
                .catch((err) => {
                    console.error("Failed to copy token: ", err);
                    fallbackCopyTextToClipboard(token);
                });
        } else {
            fallbackCopyTextToClipboard(token);
        }
    }

    function fallbackCopyTextToClipboard(text) {
        const copyBtn = document.querySelector(".copy-button");
        const originalText = copyBtn.innerHTML;

        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed";
        textArea.style.left = "-999999px";
        textArea.style.top = "-999999px";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();

        try {
            const successful = document.execCommand('copy');
            if (successful) {
                copyBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M20 6 9 17l-5-5"></path></svg> Copied';
                copyBtn.style.backgroundColor = "#28a745";
            } else {
                copyBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg> Failed';
                copyBtn.style.backgroundColor = "#dc3545";
            }
        } catch (err) {
            console.error('Fallback: Could not copy text: ', err);
        }

        document.body.removeChild(textArea);

        setTimeout(() => {
            copyBtn.innerHTML = originalText;
            copyBtn.style.backgroundColor = "";
        }, 2000);
    }
</script>
</body>
</html>
